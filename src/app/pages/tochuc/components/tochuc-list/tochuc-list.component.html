<div class="tochuc-list">
  <!-- Header -->
  <div class="page-header">
    <h2>Quản lý Tổ chức</h2>
    <nz-space>
      <button *nzSpaceItem nz-button nzType="default" (click)="switchView('table')" [nzType]="viewMode === 'table' ? 'primary' : 'default'">
        <span nz-icon nzType="table" nzTheme="outline"></span>
        Bảng
      </button>
      <button *nzSpaceItem nz-button nzType="default" (click)="switchView('tree')" [nzType]="viewMode === 'tree' ? 'primary' : 'default'">
        <span nz-icon nzType="apartment" nzTheme="outline"></span>
        Cây
      </button>
      <button *nzSpaceItem nz-button nzType="primary" (click)="onCreateClick()">
        <span nz-icon nzType="plus" nzTheme="outline"></span>
        Thêm mới
      </button>
    </nz-space>
  </div>

  <!-- Table View -->
  @if (viewMode === 'table') {
    <div class="table-container">
      <app-base-table
        [data]="treeTableData"
        [columns]="columns"
        [actions]="actions"
        [loading]="loading"
        [bordered]="true"
        [scroll]="{ y: 'calc(100vh - 360px)' }"
        [isTree]="true"
        [showPagination]="false"
      />
    </div>
  }

  <!-- Tree View -->
  @if (viewMode === 'tree') {
    <div class="tree-container">
      <nz-card>
        <app-base-tree
          [nodes]="treeData"
          [checkable]="false"
          [showLine]="true"
          [expandAll]="false"
          (nodeClick)="onTreeNodeClick($event)"
        />
      </nz-card>
    </div>
  }
</div>
