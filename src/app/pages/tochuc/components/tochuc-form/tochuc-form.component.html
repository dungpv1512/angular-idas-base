<div class="tochuc-form">
  {{ form.value | json }}
  <form nz-form nzLayout="vertical" [formGroup]="form" (ngSubmit)="onSubmit($event)">
    <div nz-row [nzGutter]="16">
      <div nz-col [nzSpan]="12">
        <app-base-input
          formControlName="MaToChuc"
          label="Mã tổ chức"
          placeholder="Nhập mã tổ chức"
          [required]="true"
          errorTip="Vui lòng nhập mã tổ chức"
        />
      </div>
      <div nz-col [nzSpan]="12">
        <app-base-input
          formControlName="TenToChuc"
          label="Tên tổ chức"
          placeholder="Nhập tên tổ chức"
          [required]="true"
          errorTip="Vui lòng nhập tên tổ chức"
        />
      </div>
    </div>

    <div nz-row [nzGutter]="16">
      <div nz-col [nzSpan]="12">
        <app-base-select
          formControlName="Loai"
          label="Loại tổ chức"
          [options]="loaiOptions"
          [required]="true"
          placeholder="Chọn loại tổ chức"
          errorTip="Vui lòng chọn loại tổ chức"
        />
      </div>
      <div nz-col [nzSpan]="12">
        <app-base-select
          formControlName="TrangThai"
          label="Trạng thái"
          [options]="trangThaiOptions"
          [required]="true"
          placeholder="Chọn trạng thái"
          errorTip="Vui lòng chọn trạng thái"
        />
      </div>
    </div>

    <app-base-tree-select
      formControlName="IdToChucCapTren"
      label="Tổ chức cấp trên"
      placeholder="Chọn tổ chức cấp trên"
      [nodes]="treeData"
      [allowClear]="true"
      [showAddButton]="true"
      addButtonText="Chọn từ danh sách"
      hint="Để trống nếu là tổ chức cấp cao nhất"
      (addClick)="openToChucSelector()"
    />

    <app-base-textarea
      formControlName="NoiDungChucNangNhiemVus"
      label="Chức năng nhiệm vụ"
      placeholder="Nhập mỗi chức năng trên một dòng"
      [rows]="8"
      [maxLength]="5000"
      [showCount]="true"
      hint="Mỗi chức năng nhiệm vụ trên một dòng"
    />

    <nz-divider></nz-divider>

    <div class="drawer-footer">
      <nz-space>
        <button *nzSpaceItem nz-button nzType="default" type="button" (click)="onCancel()">
          Hủy
        </button>
        <button *nzSpaceItem nz-button nzType="primary" type="submit">
          <span nz-icon nzType="save" nzTheme="outline"></span>
          {{ mode === 'create' ? 'Tạo mới' : 'Cập nhật' }}
        </button>
      </nz-space>
    </div>
  </form>
</div>
